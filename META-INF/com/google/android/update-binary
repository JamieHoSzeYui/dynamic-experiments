#!/sbin/sh

 PIPE=$2; ZIP=$3
 ui_print() { 
 echo -n -e "ui_print $1\n" > /proc/self/fd/$PIPE
 echo -n -e "ui_print\n" > /proc/self/fd/$PIPE
 echo "$1"
}
 
 mkdir -p /tmp/bb
 export PATH=/tmp/bb:$PATH
 
 ui_print "mkarw - Make partitions RW"
 ui_print "by henloboi 2k21"
 if [[ $(ls /dev/block/mapper | grep system) ]]; then 
    ui_print "System detected - Making RW"
    /bin/blockdev --setrw /dev/block/mapper/system
 fi  
 if [[ $(ls /dev/block/mapper | grep product) ]]; then 
    ui_print "Product detected - Making RW"
    /bin/blockdev --setrw /dev/block/mapper/product 
 fi 
  if [[ $(ls /dev/block/mapper | grep vendor) ]]; then 
    ui_print "Vendor detected - Making RW"
    /bin/blockdev --setrw /dev/block/mapper/vendor
 fi 
  if [[ $(ls /dev/block/mapper | grep system_ext) ]]; then 
    ui_print "System_ext detected - Making RW"
    /bin/blockdev --setrw /dev/block/mapper/system_ext 
 fi 
 ui_print "All done !"


